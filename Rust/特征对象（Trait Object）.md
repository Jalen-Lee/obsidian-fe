在 Rust 中,特征对象(Trait Object)是一种动态分派的机制,它允许在运行时调用实现某个特征的类型的方法。这与静态分派(通过泛型)形成对比。

特征对象的核心概念如下:

1. **动态分派**：特征对象使用动态分派,意味着方法的调用是在运行时确定的,而不是编译时。这相比静态分派更灵活,但也带来了一些性能开销。
    
2. **trait 对象**：一个特征对象是一个包含两部分的数据结构:
    
    - 指向实现该特征的具体类型的指针
    - 指向该类型的方法调用表的指针
3. **trait 对象类型**：使用 `&dyn Trait` 或 `Box<dyn Trait>` 声明特征对象类型。`dyn` 关键字表示动态分派。
    
4. **向trait 对象转换**：任何实现了特定特征的类型都可以转换为该特征的对象。
    
5. **虚方法调用**：通过特征对象调用方法时会发生虚方法调用,即通过方法调用表进行分派。

